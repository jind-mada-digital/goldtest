discountApplier.cartPromotionAlreadyApplied


$cart = CartModel::byUser(Auth::getUser());
        //dd($cart->load(['products', 'products.custom_field_values', 'discounts']));
        //dd('init');
        $cart->load(['products', 'products.custom_field_values', 'discounts', 'discounts.discount']);
        dd($cart);
        if ($cart->shipping_method_id === null) {
            $cart->setShippingMethod(ShippingMethod::getDefault());
        }
        //dd('plugins\offline\mall\components\Cart.php::setData');
        $cart->validateShippingMethod();
        //dd('init');
        /* CUSTOM logic to remove promocodes if implicitly discount is set to product or cart total*/
        //dd('init');
        $hasAppliedNonTriggerCode = $cart->checkPromocodeAndDiscounts();
        /*end*/
        //dd('init');
        $this->setVar('cart', $cart);
        $this->setVar('hasAppliedNonTriggerCode', $hasAppliedNonTriggerCode);
        $this->setVar('productPage', GeneralSettings::get('product_page'));
        $this->setVar('showDiscountApplier', $this->property('showDiscountApplier'));
        $this->setVar('showShipping', $this->property('showShipping'));
        $this->setVar('showTaxes', $this->property('showTaxes'));


/******************* SOLUTIONS ************/
plugins\offline\mall\classes\cart\DiscountApplier.php