[viewBag]
==

<script src="{{ [

    '@framework',
    '@framework.extras',

    'assets/vendor/popper/popper-1.15.0.min.js',

    'assets/vendor/bootstrap/js/index.js',
    'assets/vendor/bootstrap/js/util.js',
    'assets/vendor/bootstrap/js/alert.js',
    'assets/vendor/bootstrap/js/button.js',

    'assets/vendor/bootstrap/js/carousel.js',
    'assets/vendor/bootstrap/js/collapse.js',
    'assets/vendor/bootstrap/js/dropdown.js',
    'assets/vendor/bootstrap/js/modal.js',
    'assets/vendor/bootstrap/js/scrollspy.js',
    'assets/vendor/bootstrap/js/tab.js',

    'assets/vendor/bootstrap/js/tooltip.js',
    'assets/vendor/bootstrap/js/popover.js',
    'assets/vendor/sweetalert2/sweetalert2.min.js',

    'assets/js/app.js',
]|theme }}.js"></script>

<script>
    let lastVisitDate = localStorage.getItem('goldtest_lastVisitDate');
    if (!lastVisitDate) {
        const today = new Date();
        lastVisitDate = today.toLocaleDateString();
        localStorage.setItem('goldtest_lastVisitDate', lastVisitDate);
    }
    // Get the user's browser language
    const userLanguage = navigator.language.substring(0, 2);

  	const languagePaths = ['/fr', '/en', '/de', '/it']; // Better dynamic
    const targetPath = ['/club5', '/about-goldtest', '/league5', '/conditions-generales-de-vente']; // better dynamic

    const isHome = () => {
        return languagePaths.filter( path => path == window.location.pathname ).length > 0;
    };

    const isFrontPage = () => {
        return targetPath.some( path => window.location.pathname.endsWith( path ) );
    };

    $(document).ready(function() {

        const today = new Date();
        let lastVisitDate = localStorage.getItem('goldtest_lastVisitDate');

        localStorage.setItem('goldtest_lastVisitDate', today.toLocaleDateString());

        
		  
        // Check if the current page is the home page
        const currentPath = window.location.pathname;

        const currentDate = new Date();
        const endDate = new Date('2024-03-01'); 

        if ( currentDate < endDate ) {
            popupImage = 'assets/images/goldtest-st-valentin-offer-2024.jpg';
        }
        else{
            popupImage = 'assets/images/annoncegeneral_001.png';
        }

        if ( isHome() || isFrontPage() ) {
            Swal.fire({
                title: null,
                html: `<img src="{{ '${popupImage}'|theme }}" width="100%"/>`,
                width: 750,
                showCloseButton: true,
                showCancelButton: false,
                showConfirmButton: false,
                confirmButtonColor: '#d33',
                confirmButtonText: 'Fermer',
            });
        }

        
    });
</script>

{% scripts %}

{% flash %}
    <p data-control="flash-message"
       class="flash-message fade {{ type }}"
       data-interval="{{ type in ['error', 'warning'] ? 15 : 5 }}">
        {{ message }}
    </p>
{% endflash %}
